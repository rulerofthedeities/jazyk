<div class="panel panel-default transparant manual">
  <div class="panel-heading">
    <span class="fa fa-question-circle fa-spacing-title"
      (click)="onReturnToIndex()">
    </span>
    <span *ngIf="!isIndex || text">
      {{isIndex ? text["Manual"] : page?.title}}
    </span>
    <a *ngIf="!isIndex" routerLink="/manual/index"
      class="fa fa-arrow-up pull-right back"
      (click)="onReturnToIndex()">
    </a>
  </div>
  <div class="panel-body">
    <ul *ngIf="isIndex" class="list-group">
      <li *ngFor="let item of index"
        class="list-group-item"
        [hidden]="isSectionClosed(item)"
        (click)="onGoToManualPage(item)"
        [ngClass]="'level-' + item.level"
        [class.header]="item.isHeader">
        <span
          *ngIf="item.isHeader"
          class="fa fa-spacing chevron"
          [ngClass]="{
            'fa-chevron-down': !sectionClosed[item.sort],
            'fa-chevron-right': sectionClosed[item.sort]
          }">
        </span>
        <span *ngIf="!item.isHeader" class="fa fa-arrow-right"></span>
        <span *ngIf="!item.isHeader">
          &nbsp;<a routerLink="/manual/{{getPath(item)}}">{{item.title}}</a>
        </span>
        <span *ngIf="item.isHeader">
          &nbsp;{{item.title}}
        </span>
      </li>
    </ul>
    <div *ngIf="!isIndex"
      [innerHTML]="page?.html | sanitizeHtml" (click)="getRoute($event)">
    </div>
    <button *ngIf="nextPage"
      type="button"
      class="btn btn-success next-btn"
      (click)="onGoToNextPage(nextPage)"
      >
      <span class="fa fa-arrow-right fa-spacing"></span>Next: {{nextPage.title}}
    </button>
    <button *ngIf="!isIndex && !nextPage"
      type="button"
      class="btn btn-success next-btn"
      (click)="onReturnToIndex()"
      >
      <span class="fa fa-arrow-up fa-spacing"></span>Back to index
    </button>
  </div>
</div>
