<nav class="navbar navbar-earthy navbar-fixed-top">
  <div class="container">
    <!-- <div style="font-size:10px">user: {{userService?.user|json}}</div> -->
    <!-- Brand and toggle get grouped for better mobile display -->
    <div class="navbar-header">
      <button type="button" data-target="#navbarCollapse" data-toggle="collapse" class="navbar-toggle">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a routerLink="/home" class="logo">
        <img src="/assets/img/logobadge.png">
      </a>
    </div>
    <!-- Collection of nav links and other content for toggling -->
    <div id="navbarCollapse" class="collapse navbar-collapse">
      <ul class="nav navbar-nav">
        <li routerLinkActive="active" [routerLinkActiveOptions]="{exact: true}">
          <a routerLink="/learn">
            <span class="fa fa-book"></span>
            {{text["Learn"]}}
            <span class="bar">
            </span>
          </a>
        </li>
        <li routerLinkActive="active" *ngIf="isLoggedIn()">
          <a routerLink="/build/courses">
            <span class="fa fa-pencil"></span>
            {{text["Teach"]}}
            <span class="bar">
            </span>
          </a>
        </li>
        <li routerLinkActive="active">
          <a routerLink="/learn/courses">
            <span class="fa fa-th-list"></span>
            {{text["Courses"]}}
            <span class="bar">
            </span>
          </a>
        </li>
      </ul>
      <!-- Notifications & Messages -->
      <ul class="nav navbar-nav navbar-right">
        <li class="nav-item indicator" 
          (click)="onGoto('notifications')" 
          *ngIf="isLoggedIn()">
          <a class="nav-link notifications">
            <i class="fa fa-bell-o"></i>
            <span class="badge"
              [style.visibility]="nrOfNotifications > 0 ? 'visible': 'hidden'">
              {{nrOfNotifications}}
            </span>
            <span class="bar small"></span>
          </a>
        </li>
        <li class="nav-item indicator" 
          (click)="onGoto('messages')" 
          *ngIf="isLoggedIn()">
          <a class="nav-link messages">
            <i class="fa fa-envelope-o"></i>
            <span class="badge"
              [style.visibility]="nrOfMessages > 0 ? 'visible': 'hidden'">
              {{nrOfMessages}}
            </span>
            <span class="bar small"></span>
          </a>
        </li>
        <!-- Not Logged In -->
        <li routerLinkActive="active" 
          class="login"
          *ngIf="!isLoggedIn() && url!=='/auth/signin' && url!=='/home'">
          <a 
            routerLink="/auth/signin">
            <span class="fa fa-sign-in"></span>
            {{text["Login"]}}
            <span class="bar"></span>
          </a>
        </li>
        <li 
          class="nav-item dropdown" 
          *ngIf="!isLoggedIn() && url==='/home'"
          on-mouseover='onShowDropDown(true)'
          on-mouseout='onShowDropDown(false)'>
          <a 
            class="nav-link dropdown-toggle user-action">
            <img 
              src="/assets/img/flags/{{intLan._id}}.png"
              alt="{{intLan?.nativeName}}" class="flag" />
              {{intLan?.nativeName}}
            <span 
              class="fa fa-caret" [ngClass]="{
              'fa-caret-right': !showDropDown,
              'fa-caret-down': showDropDown
            }"></span>
          </a>
          <ul 
            class="dropdown-menu dropdown-lan"
            [style.display]="showDropDown ? 'block' : 'none'">
            <li
              *ngFor="let lan of intLans" 
              (click)="onSelectLanguage(lan)">
              <a class="dropdown-item" *ngIf="lan._id !== intLan._id">
                <img 
                  src="/assets/img/flags/{{lan._id}}.png"
                  alt="{{lan?.nativeName}}" class="flag" />
                {{lan.nativeName}}
              </a>
            </li>
          </ul>
        </li>
        <!-- Logged In -->
        <li
          class="gravatar"
          *ngIf="isLoggedIn() && userService?.user?.emailHash">
          <img kmGravatar [hash]="userService?.user?.emailHash" [width]="32">
        </li>
        <li 
          class="nav-item dropdown" 
          *ngIf="isLoggedIn()"
          on-mouseover='onShowDropDown(true)'
          on-mouseout='onShowDropDown(false)'>
          <a 
            class="nav-link dropdown-toggle user-action">
            {{userService?.user?.userName}} 
            <span 
              class="fa fa-caret" [ngClass]="{
              'fa-caret-right': !showDropDown,
              'fa-caret-down': showDropDown
            }"></span>
          </a>
          <ul 
            class="dropdown-menu"
            [style.display]="showDropDown ? 'block' : 'none'">
            <li (click)="onGoto('profile')">
              <a class="dropdown-item">
                <span class="fa fa-user-o"></span> {{text["Profile"]}}
              </a>
            </li>
            <li (click)="onGoto('settings')">
              <a class="dropdown-item">
                <span class="fa fa-sliders"></span> {{text["Settings"]}}
              </a>
            </li>
            <li class="divider dropdown-divider"></li>
            <li (click)="onLogOut()">
              <a class="dropdown-item">
                <span class="fa fa-sign-out"></span> {{text["Logout"]}}
              </a>
            </li>
          </ul>
        </li>
      </ul>
    </div>
  </div>
</nav>