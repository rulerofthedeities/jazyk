<form *ngIf="isFormReady"
  [formGroup]="exerciseForm"
  class="form-horizontal">

  <!-- FOREIGN WORD -->
  
  <div class="form-group">
    <label 
      for="foreignWord" 
      class="control-label col-xs-1">
      <img src="/assets/img/flags/{{languagePair.to}}.png" class="flag">
    </label>
    <div class="col-xs-11">
      <input 
        class="form-control" 
        id="foreignWord"
        autocomplete="off"
        placeholder="{{text['Enterword' + lanForeign]}}"
        required
        formControlName="foreignWord"
        (focus)="onFocus(foreign.value, lanForeign)" 
        (ngModelChange)="onFilterChanged(foreign.value, lanForeign)"
        #foreign>
    </div>
  </div>

  <div class="form-group" *ngIf="lanList===lanForeign">
    <div class="col-xs-11 col-xs-offset-1">
      <km-filter-list
        [wordpairs]="wordpairs"
        [languageId]="lanList"
        [languagePair]="languagePair"
        (close)="onCloseDropdown()"
        (selectedWord)="onWordSelected($event)">
      </km-filter-list>
    </div>
  </div>

  <!-- UPDATE FOREIGN -->

  <div *ngIf="exercise">
    <!-- Foreign word tpe -->
    <div class="form-group">
      <label 
        class="control-label col-xs-1">
      </label>
      <label 
        for="foreignWordTpe" 
        class="control-label col-xs-1 txt">
        Type:
      </label>
      <div class="col-xs-4">
        <select 
          class="form-control" 
          id="foreignWordTpe"
          formControlName="wordTpe" #wordTpe>
          <option 
            *ngFor="let tpe of formData.wordTpes"
            [value]="tpe.name">
            {{tpe.nameLocal}}
          </option>
        </select>
      </div>
      <label 
        *ngIf="wordTpe"
        class="control-label col-xs-1 txt">
        {{getDynamicFieldLabel()}}
      </label>
      <div class="col-xs-4" *ngIf="wordTpe">
        <select 
          *ngIf="customField==='genus'"
          class="form-control" 
          id="genus"
          formControlName="genus">
          <option 
            *ngFor="let genus of this.config.genera"
            [value]="genus">
            {{genus}}
          </option>
        </select>
      </div>
    </div>
    <!-- Foreign Alt words -->
    <div class="form-group">
      <label 
        class="control-label col-xs-1">
      </label>
      <label 
        for="foreignAlt" 
        class="control-label col-xs-1 txt">
        Alt.:
      </label>
      <div class="control-label col-xs-3" *ngIf="addFields['altForeign']">
        <div class="input-group">
          <input 
            type="text"
            class="form-control" 
            id="foreignAlt"
            autocomplete="off"
            #altforeign>
          <span class="input-group-btn">
            <button
              type="button"
              class="btn btn-success"
              (click)="onAdd('alt', 'foreign', altforeign.value); altforeign.value = '';">
              Add
            </button>
          </span>
        </div>
      </div>
      <div class="col-xs-7">
        <span (click)="onActivateField('altForeign')" class="fa fa-plus txt add"  *ngIf="!addFields['altForeign']"></span>
        <ul class="list-inline" *ngIf="exercise.foreign.alt">
          <li *ngFor="let alt of exercise.foreign.alt.split('|'); let i = index" class="list-group-item">
            {{alt}} <span class="fa fa-times" (click)="onRemove('alt', 'foreign', i)"></span>
          </li>
        </ul>
      </div>
    </div>
    <!-- Foreign Annotations -->
    <div class="form-group">
      <label 
        class="control-label col-xs-1">
      </label>
      <label 
        for="foreignAnnotations" 
        class="control-label col-xs-1 txt">
        Annot.:
      </label>
      <div class="control-label col-xs-3" *ngIf="addFields['annotationsForeign']">
        <div class="input-group">
          <input 
            type="text"
            class="form-control" 
            id="foreignAnnotations"
            autocomplete="off"
            #annotationsForeign>
          <span class="input-group-btn">
            <button
              type="button"
              class="btn btn-success"
              (click)="onAdd('annotations', 'foreign', annotationsForeign.value); annotationsForeign.value = ''">
              Add
            </button>
          </span>
        </div>
      </div>
      <div class="col-xs-7">
        <span (click)="onActivateField('annotationsForeign')" class="fa fa-plus txt add"  *ngIf="!addFields['annotationsForeign']"></span>
        <ul class="list-inline" *ngIf="exercise.foreign.annotations">
          <li *ngFor="let annotation of exercise.foreign.annotations.split('|'); let i = index" class="list-group-item">
            {{annotation}} <span class="fa fa-times" (click)="onRemove('annotations', 'foreign', i)"></span>
          </li>
        </ul>
      </div>
    </div>
  </div>

  <!-- LOCAL WORD -->

  <div class="form-group">
    <label 
      for="localWord" 
      class="control-label col-xs-1">
      <img src="/assets/img/flags/{{this.languagePair.from}}.png" class="flag">
    </label>
    <div class="col-xs-11">
      <input 
        class="form-control" 
        id="localWord"
        autocomplete="off"
        placeholder="{{text['Enterword' + lanLocal]}}"
        required
        formControlName="localWord"
        (focus)="onFocus(local.value, lanLocal)"
        (ngModelChange)="onFilterChanged(local.value, lanLocal)"
        #local>
    </div>
  </div>

  <div class="form-group" *ngIf="lanList===lanLocal">
    <div class="col-xs-11 col-xs-offset-1">
      <km-filter-list
        [wordpairs]="wordpairs"
        [languageId]="lanList"
        [languagePair]="languagePair"
        (close)="onCloseDropdown()"
        (selectedWord)="onWordSelected($event)">
      </km-filter-list>
    </div>
  </div>

  <div class="form-group">
    <div class="col-xs-11 col-xs-offset-1">
      <div class="btn btn-success"
        [attr.disabled] = "isSaving ? '' : null"
        (click)="onSaveNewWord(exerciseForm.value)"
        *ngIf="!exercise && exerciseForm.valid">
        {{text.Addword}}
      </div>
      <div class="btn btn-success"
        [attr.disabled] = "isSaving ? '' : null"
        (click)="onEditWord(exerciseForm.value)"
        *ngIf="exercise && exerciseForm.valid">
        {{text.Editword}}
      </div>
      <div class="btn btn-warning"
        [attr.disabled] = "isSaving ? '' : null"
        (click)="onCancelEdit()"
        *ngIf="exercise">
        {{text.cancel}}
      </div>
    </div>
  </div>

</form>
