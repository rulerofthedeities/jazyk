<div *ngIf="isCourseAccess">

  <km-build-course-header-bar
    *ngIf="course"
    [text]="text"
    [course]="course"
    [showLink]="true">
  </km-build-course-header-bar>

  <h2 *ngIf="!isEditMode" class="header">
    {{lesson?.name}}
    <div class="btn btn-warning" (click)="onEditLesson()">
      <span class="fa fa-cog"></span> {{text["Settings"]}}
    </div>
  </h2>

  <km-build-lesson-header *ngIf="isEditMode" class="header"
    [lesson]="lesson"
    [text]="text"
    [chapters]="chapters"
    (done)="onCloseHeader($event)">
  </km-build-lesson-header>

  <km-build-lesson-tabs
    [text]="text"
    [tab]="tab"
    [isIntro]="lesson?.exerciseSteps?.intro?.active"
    (selected)="onTabSelected($event)">
  </km-build-lesson-tabs>

  <div *ngIf="tab==='words'">
    <km-exercise-list 
      *ngIf="lesson"
      [languagePair]="lesson?.languagePair"
      [lessonId]="lesson?._id"
      [text]="text"
      [isBidirectional]="isBidirectional"
      [exercises]="lesson.exercises"
      (removedExercise)="onExerciseRemoved($event)">
    </km-exercise-list>

    <div class="footer">
      <div *ngIf="!isNewExercise; else addExercise">
        <div align="" class="btn btn-success btn-lg" (click)="onNewWord()">
          <span class="fa fa-file"></span> {{text["Newword"]}}
        </div>
        <div class="btn btn-success btn-lg" (click)="onNewSentence()">
          <span class="fa fa-file-text-o"></span> {{text["NewSentence"]}}
        </div>
      </div>
    </div>

    <ng-template #addExercise>
      <km-build-exercise
        *ngIf="tpe===0"
        [languagePair]="lesson?.languagePair"
        [lessonId]="lesson?._id"
        [text]="text"
        (addedExercises)="onExercisesAdded($event)"
        (cancelNew)="onCancelNew()">
      </km-build-exercise>
      <km-build-sentence *ngIf="tpe===1"
        [text]="text"
        [languagePair]="lesson?.languagePair"
        (cancelNew)="onCancelNew()">
      </km-build-sentence>
    </ng-template>
  </div>

  <km-build-lesson-intro *ngIf="tab==='intro'"
    [lessonId]="lesson?._id"
    [text]="text">
  </km-build-lesson-intro>
</div>

<km-info-msg [msg]="infoMsg" *ngIf="infoMsg">
</km-info-msg>