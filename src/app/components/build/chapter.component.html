<div 
  class="navbar navbar-default" 
  dnd-sortable
  [sortableIndex]="nr">
  <div class="navbar-header">
    <a href="#" (click)="onClick($event, 'open')" class="navbar-brand">
      <span class="fa" [ngClass]="{'fa-caret-down': isOpen, 'fa-caret-right': !isOpen}"></span>
    </a>
  </div>
  <div class="collapse navbar-collapse">
    <ul class="nav navbar-nav">
      <li><a href="#" (click)="onClick($event, 'openchapter')">{{nr + 1}}. {{title}} ({{total}})</a></li>
    </ul>
    <ul class="nav navbar-nav navbar-right">
      <li *ngIf="total === 0">
        <button (click)="onClick(confirmchapter, 'removechapter')" class="btn btn-danger">
          <span class="fa fa-trash"></span>
        </button>
      </li>
    </ul>
  </div>
  <div class="lessons" [ngStyle]="{display: isOpen ? 'block' : 'none'}">
    <ul class="lesson list-unstyled">
      <li *ngFor="let lesson of lessons">
        <div class="panel panel-default">
          <div class="panel-body">
            {{lesson.name}}  ({{lesson.exercises?.length}})
            <button class="btn btn-warning pull-right" (click)="onClick(lesson._id, 'editlesson')">
              <span class="fa fa-pencil"></span> {{text["Editlesson"]}}
            </button>
            <button
              class="btn btn-danger pull-right"
              (click)="onClick($event, 'removelesson')"
              *ngIf="lesson.exercises?.length === 0">
              <span class="fa fa-trash"></span>
            </button>
          </div>
        </div>
      </li>
    </ul>
  </div>
</div>

<km-modal-confirm #confirmchapter
  [level]="'warning'"
  [text]="text"
  (confirmed)="onRemoveConfirmed($event)">
  <div title>{{text.Warning}}</div>
  <div message>{{getRemoveMessage('Chapter')}}</div>
</km-modal-confirm>