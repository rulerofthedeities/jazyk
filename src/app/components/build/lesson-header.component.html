<form
  [formGroup]="lessonForm"
  (ngSubmit) = "onSubmit(lessonForm.value)"
  *ngIf="isFormReady"
  class="form-horizontal">

  <!-- NAME -->
  <div class="form-group form-group-lg">
    <label for="name" class="control-label col-xs-2">Naam</label>
    <div class="col-xs-10">
      <input 
        *ngIf="isEditMode"
        type="text" 
        class="form-control" 
        autocomplete="off"
        id="name" 
        placeholder="Naam van de les"
        (focus)="onFocusName()"
        [formControlName]="'name'">
      <div *ngIf="!isEditMode" class="form-control-static">
        {{lesson.name}}
      </div>
    </div>
  </div>

  <!-- CHAPTER -->
  <div class="form-group form-group-lg">
    <label for="name" class="control-label col-xs-2">Hoofdstuk</label>
    <div class="col-xs-10">
      <km-autocomplete
        [items]="chapters"
        [currentItem]="lesson.chapter"
        [placeholder]="'Naam van het hoofstuk'">
      </km-autocomplete>
      <div *ngIf="!isEditMode" class="form-control-static">
        {{lesson.chapter?.name}}
      </div>
    </div>
  </div>

  <!-- EXERCISETPES -->
  <div class="form-group form-group-lg">
    <label for="name" class="control-label col-xs-2">Lestypes</label>
    <div class="col-xs-10">
      <div class="btn-group" data-toggle="buttons">
        <label 
          *ngFor="let control of lessonForm.controls['exerciseTpes'].controls; let i = index" 
          class="btn btn-default"
          [ngClass]="{active: !control.value}">
          <span 
            class="fa" 
            [ngClass]="{'fa-check': control.value, 'fa-times': !control.value}">
          </span>
          <input 
            type="checkbox"
            name="options"
            value="{{value-1}}"
            [formControl]="control">
            {{tpeLabels[i]}}
        </label>
      </div>
    </div>
  </div>

  <!-- BUTTONS -->

  <div class="btn btn-alert" (click)="test(lessonForm.value)">Test</div>

  <div class="row">
    <div class="col-xs-10 col-xs-offset-2">

    <!-- EDIT MODE -->
      <div *ngIf="isEditMode">
        <button
          type="submit" 
          class="btn btn-success" 
          [disabled]="!lessonForm.valid || !lessonForm.dirty">
          {{isNew ? 'Voeg les toe' : 'Voer wijzigingen door'}}
        </button>
        <button 
          class="btn btn-warning" 
          (click)="onCancel()">
          Annuleer
        </button>
      </div>
    </div>
  </div>
</form>
